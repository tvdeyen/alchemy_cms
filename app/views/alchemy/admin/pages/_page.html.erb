<tr id="page_<%= page.id %>" class="even">
  <td class="icon">
    <% if page.definition.empty? %>
      <%= page_layout_missing_warning %>
    <% else %>
      <% if can?(:edit_content, page) %>
        <% if page.locked? %>
          <span class="with-hint">
            <i class="icon fas fa-edit fa-fw"></i>
            <span class="hint-bubble">
              <%= Alchemy.t('This page is locked', name: page.locker_name) %>
            </span>
          </span>
        <% else %>
          <i class="icon far fa-file fa-lg"></i>
        <% end %>
      <% else %>
        <span class="with-hint">
          <i class="icon fas fa-ban fa-fw"></i>
          <span class="hint-bubble">
            <%= Alchemy.t('Your user role does not allow you to edit this page') %>
          </span>
        </span>
      <% end %>
    <% end %>
  </td>
  <td>
    <% page.ancestors.each do |ancestor| %>
      <span class="page-ancestor">
        <%= ancestor.name %>
        &#47;
      </span>
    <% end %>
    <%= link_to_if(
      can?(:edit_content, page),
      page.name,
      alchemy.edit_admin_page_path(page),
      title: Alchemy.t(:edit_page)
    ) -%>
  </td>
  <td class="date">
    <%= l page.updated_at, format: :'alchemy.page_status' %>
  </td>
  <% unless page.layoutpage? %>
    <td class="status">
      <%= render 'page_status', page: page %>
    </td>
  <% end %>
  <td class="tools">
    <% if can?(:info, page) %>
      <div class="button_with_label">
        <%= link_to_dialog(
          render_icon('info-circle'),
          alchemy.info_admin_page_path(page),
          {
            title: Alchemy.t(:page_infos),
            size: page.layoutpage? ? '520x190' : '520x290'
          }
        ) %>
        <label class="center"><%= Alchemy.t(:page_infos) %></label>
      </div>
    <% else %>
      <div class="disabled with-hint">
        <%= render_icon('info-circle') %>
        <span class="hint-bubble">
          <%= Alchemy.t('Your user role does not allow you to edit this page') %>
        </span>
      </div>
    <% end %>
    <% if can?(:configure, page) %>
      <div class="button_with_label">
        <%= link_to_dialog(
          render_icon(:cog),
          page.layoutpage? ? alchemy.edit_admin_layoutpage_path(page) : alchemy.configure_admin_page_path(page),
          {
            title: Alchemy.t(:edit_page_properties),
            size: page.layoutpage? ? '410x170' : '450x720'
          }
        ) -%>
        <label class="center"><%= Alchemy.t(:edit_page_properties) %></label>
      </div>
    <% else %>
      <div class="disabled with-hint">
        <%= render_icon(:cog) %>
        <span class="hint-bubble">
          <%= Alchemy.t('Your user role does not allow you to edit this page') %>
        </span>
      </div>
    <% end %>
    <% if can?(:copy, page) %>
      <div class="button_with_label">
        <%= link_to(
          render_icon(:copy),
          alchemy.insert_admin_clipboard_path(
            remarkable_type: page.class.name.demodulize.underscore.pluralize,
            remarkable_id: page.id
          ),
          remote: true,
          method: 'post'
        ) %>
        <label class="center"><%= Alchemy.t(:copy_page) %></label>
      </div>
    <% else %>
      <div class="isabled with-hint">
        <%= render_icon(:copy) %>
        <span class="hint-bubble">
          <%= Alchemy.t('Your user role does not allow you to edit this page') %>
        </span>
      </div>
    <% end %>
    <% if can?(:destroy, page) %>
      <div class="button_with_label">
        <%= link_to_confirm_dialog(
          render_icon(:minus),
          Alchemy.t(:confirm_to_delete_page),
          url_for(
            controller: 'pages',
            action: 'destroy',
            id: page.id
          )
        ) -%>
        <label class="center"><%= Alchemy.t(:delete_page) %></label>
      </div>
    <% else %>
      <div class="disabled with-hint">
        <%= render_icon(:minus) %>
        <span class="hint-bubble">
          <%= Alchemy.t('Your user role does not allow you to edit this page') %>
        </span>
      </div>
    <% end %>
    <% if can?(:create, page) %>
      <div class="button_with_label">
        <%= link_to_dialog(
          render_icon(:plus),
          alchemy.new_admin_page_path(parent_id: page.id),
          {
            title: Alchemy.t(:create_page),
            size: '340x220',
            overflow: true
          }
        ) -%>
        <label class="left"><%= Alchemy.t(:create_page) %></label>
      </div>
    <% else %>
      <div class="disabled with-hint">
        <%= render_icon(:plus) %>
        <span class="hint-bubble">
          <%= Alchemy.t('Your user role does not allow you to edit this page') %>
        </span>
      </div>
    <% end %>
  </td>
</tr>
